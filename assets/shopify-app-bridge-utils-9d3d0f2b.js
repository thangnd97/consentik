import{c as f}from"./react-dfcefdeb.js";import{M as q,S as N,A as G,u as V}from"./shopify-app-bridge-react-1f9c67e7.js";import{g as X,M as K,e as B}from"./shopify-app-bridge-f6ac428f.js";var W={},F={},v={},h={};Object.defineProperty(h,"__esModule",{value:!0});h.isShopifyPing=h.isShopifyPOS=h.isShopifyMobile=h.isShopifyEmbedded=h.isMobile=void 0;var z=X;function Z(){return D()||U()||I()}h.isMobile=Z;function k(){return z.isClient&&window.top!==window.self||z.isUnframed}h.isShopifyEmbedded=k;function D(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Mobile")>=0}h.isShopifyMobile=D;function U(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify POS")>=0}h.isShopifyPOS=U;function I(){return typeof navigator<"u"&&navigator.userAgent.indexOf("Shopify Ping")>=0}h.isShopifyPing=I;var J=f&&f.__awaiter||function(a,o,n,i){function r(e){return e instanceof n?e:new n(function(u){u(e)})}return new(n||(n=Promise))(function(e,u){function l(c){try{t(i.next(c))}catch(d){u(d)}}function s(c){try{t(i.throw(c))}catch(d){u(d)}}function t(c){c.done?e(c.value):r(c.value).then(l,s)}t((i=i.apply(a,o||[])).next())})},Q=f&&f.__generator||function(a,o){var n={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},i,r,e,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(t){return function(c){return s([t,c])}}function s(t){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,r&&(e=t[0]&2?r.return:t[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,t[1])).done)return e;switch(r=0,e&&(t=[t[0]&2,e.value]),t[0]){case 0:case 1:e=t;break;case 4:return n.label++,{value:t[1],done:!1};case 5:n.label++,r=t[1],t=[0];continue;case 7:t=n.ops.pop(),n.trys.pop();continue;default:if(e=n.trys,!(e=e.length>0&&e[e.length-1])&&(t[0]===6||t[0]===2)){n=0;continue}if(t[0]===3&&(!e||t[1]>e[0]&&t[1]<e[3])){n.label=t[1];break}if(t[0]===6&&n.label<e[1]){n.label=e[1],e=t;break}if(e&&n.label<e[2]){n.label=e[2],n.ops.push(t);break}e[2]&&n.ops.pop(),n.trys.pop();continue}t=o.call(a,n)}catch(c){t=[6,c],r=0}finally{i=e=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}};Object.defineProperty(v,"__esModule",{value:!0});v.createMutationObserver=v.setupModalAutoSizing=void 0;var Y=q,ee=K,te=h,O="app-bridge-utils-modal-auto-size",w=ne();function ne(){if(typeof document>"u")return null;var a=document.createElement("style");return a.type="text/css",a.innerHTML="."+O+" { overflow: hidden; height: auto; min-height: auto; }",a}function re(a,o){if(!w)return function(){};var n=document.getElementsByTagName("head")[0],i=document.body.classList;n.appendChild(w),i.add(O);var r=L(a,o);return function(){i.remove(O),n.contains(w)&&n.removeChild(w),r&&r.disconnect()}}function ie(a){return J(this,void 0,void 0,function(){function o(){i&&(i(),i=void 0)}function n(r){var e=r.context,u=r.modal.id;return te.isMobile()||e!==ee.Context.Modal?(o(),o):(i||(i=re(a,u)),o)}var i;return Q(this,function(r){switch(r.label){case 0:return[4,a.getState().then(n)];case 1:return r.sent(),[2,o]}})})}v.setupModalAutoSizing=ie;function L(a,o){if(typeof document>"u")return;var n=-1,i,r={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},e=new MutationObserver(u);e.observe(document,r),l();function u(){i&&window.clearTimeout(i),i=window.setTimeout(l,16)}function l(){var s=document.body.scrollHeight;s!==n&&(n=s,a.dispatch(Y.updateModalSize({id:o,height:String(s)})))}return e}v.createMutationObserver=L;var R={},b={},ae=f&&f.__createBinding||(Object.create?function(a,o,n,i){i===void 0&&(i=n),Object.defineProperty(a,i,{enumerable:!0,get:function(){return o[n]}})}:function(a,o,n,i){i===void 0&&(i=n),a[i]=o[n]}),ue=f&&f.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),oe=f&&f.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var n in a)n!=="default"&&Object.prototype.hasOwnProperty.call(a,n)&&ae(o,a,n);return ue(o,a),o},ce=f&&f.__awaiter||function(a,o,n,i){function r(e){return e instanceof n?e:new n(function(u){u(e)})}return new(n||(n=Promise))(function(e,u){function l(c){try{t(i.next(c))}catch(d){u(d)}}function s(c){try{t(i.throw(c))}catch(d){u(d)}}function t(c){c.done?e(c.value):r(c.value).then(l,s)}t((i=i.apply(a,o||[])).next())})},fe=f&&f.__generator||function(a,o){var n={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},i,r,e,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(t){return function(c){return s([t,c])}}function s(t){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,r&&(e=t[0]&2?r.return:t[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,t[1])).done)return e;switch(r=0,e&&(t=[t[0]&2,e.value]),t[0]){case 0:case 1:e=t;break;case 4:return n.label++,{value:t[1],done:!1};case 5:n.label++,r=t[1],t=[0];continue;case 7:t=n.ops.pop(),n.trys.pop();continue;default:if(e=n.trys,!(e=e.length>0&&e[e.length-1])&&(t[0]===6||t[0]===2)){n=0;continue}if(t[0]===3&&(!e||t[1]>e[0]&&t[1]<e[3])){n.label=t[1];break}if(t[0]===6&&n.label<e[1]){n.label=e[1],e=t;break}if(e&&n.label<e[2]){n.label=e[2],n.ops.push(t);break}e[2]&&n.ops.pop(),n.trys.pop();continue}t=o.call(a,n)}catch(c){t=[6,c],r=0}finally{i=e=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}};Object.defineProperty(b,"__esModule",{value:!0});b.getSessionToken=void 0;var x=oe(N),E=B;function le(a){return ce(this,void 0,void 0,function(){return fe(this,function(o){return[2,new Promise(function(n,i){var r=a.subscribe(x.Action.RESPOND,function(e){var u=e.sessionToken;u?n(u):i(E.fromAction("Failed to retrieve a session token",E.Action.FAILED_AUTHENTICATION)),r()});a.dispatch(x.request())})]})})}b.getSessionToken=le;var S={},g=f&&f.__assign||function(){return g=Object.assign||function(a){for(var o,n=1,i=arguments.length;n<i;n++){o=arguments[n];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(a[r]=o[r])}return a},g.apply(this,arguments)},se=f&&f.__awaiter||function(a,o,n,i){function r(e){return e instanceof n?e:new n(function(u){u(e)})}return new(n||(n=Promise))(function(e,u){function l(c){try{t(i.next(c))}catch(d){u(d)}}function s(c){try{t(i.throw(c))}catch(d){u(d)}}function t(c){c.done?e(c.value):r(c.value).then(l,s)}t((i=i.apply(a,o||[])).next())})},de=f&&f.__generator||function(a,o){var n={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},i,r,e,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(t){return function(c){return s([t,c])}}function s(t){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,r&&(e=t[0]&2?r.return:t[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,t[1])).done)return e;switch(r=0,e&&(t=[t[0]&2,e.value]),t[0]){case 0:case 1:e=t;break;case 4:return n.label++,{value:t[1],done:!1};case 5:n.label++,r=t[1],t=[0];continue;case 7:t=n.ops.pop(),n.trys.pop();continue;default:if(e=n.trys,!(e=e.length>0&&e[e.length-1])&&(t[0]===6||t[0]===2)){n=0;continue}if(t[0]===3&&(!e||t[1]>e[0]&&t[1]<e[3])){n.label=t[1];break}if(t[0]===6&&n.label<e[1]){n.label=e[1],e=t;break}if(e&&n.label<e[2]){n.label=e[2],n.ops.push(t);break}e[2]&&n.ops.pop(),n.trys.pop();continue}t=o.call(a,n)}catch(c){t=[6,c],r=0}finally{i=e=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}};Object.defineProperty(S,"__esModule",{value:!0});S.authenticatedFetch=void 0;var he=b;function ve(a,o){var n=this;return o===void 0&&(o=fetch),function(i,r){return r===void 0&&(r={}),se(n,void 0,void 0,function(){var e,u,l;return de(this,function(s){switch(s.label){case 0:return[4,he.getSessionToken(a)];case 1:return e=s.sent(),u=new Headers(r.headers),u.append("Authorization","Bearer "+e),u.append("X-Requested-With","XMLHttpRequest"),l={},u.forEach(function(t,c){l[c]=t}),[2,o(i,g(g({},r),{headers:l}))]}})})}}S.authenticatedFetch=ve;(function(a){var o=f&&f.__createBinding||(Object.create?function(i,r,e,u){u===void 0&&(u=e),Object.defineProperty(i,u,{enumerable:!0,get:function(){return r[e]}})}:function(i,r,e,u){u===void 0&&(u=e),i[u]=r[e]}),n=f&&f.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&o(r,i,e)};Object.defineProperty(a,"__esModule",{value:!0}),n(b,a),n(S,a)})(R);var H={},_={},be=f&&f.__createBinding||(Object.create?function(a,o,n,i){i===void 0&&(i=n),Object.defineProperty(a,i,{enumerable:!0,get:function(){return o[n]}})}:function(a,o,n,i){i===void 0&&(i=n),a[i]=o[n]}),_e=f&&f.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),ye=f&&f.__importStar||function(a){if(a&&a.__esModule)return a;var o={};if(a!=null)for(var n in a)n!=="default"&&Object.prototype.hasOwnProperty.call(a,n)&&be(o,a,n);return _e(o,a),o},we=f&&f.__awaiter||function(a,o,n,i){function r(e){return e instanceof n?e:new n(function(u){u(e)})}return new(n||(n=Promise))(function(e,u){function l(c){try{t(i.next(c))}catch(d){u(d)}}function s(c){try{t(i.throw(c))}catch(d){u(d)}}function t(c){c.done?e(c.value):r(c.value).then(l,s)}t((i=i.apply(a,o||[])).next())})},ge=f&&f.__generator||function(a,o){var n={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},i,r,e,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(t){return function(c){return s([t,c])}}function s(t){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,r&&(e=t[0]&2?r.return:t[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,t[1])).done)return e;switch(r=0,e&&(t=[t[0]&2,e.value]),t[0]){case 0:case 1:e=t;break;case 4:return n.label++,{value:t[1],done:!1};case 5:n.label++,r=t[1],t=[0];continue;case 7:t=n.ops.pop(),n.trys.pop();continue;default:if(e=n.trys,!(e=e.length>0&&e[e.length-1])&&(t[0]===6||t[0]===2)){n=0;continue}if(t[0]===3&&(!e||t[1]>e[0]&&t[1]<e[3])){n.label=t[1];break}if(t[0]===6&&n.label<e[1]){n.label=e[1],e=t;break}if(e&&n.label<e[2]){n.label=e[2],n.ops.push(t);break}e[2]&&n.ops.pop(),n.trys.pop();continue}t=o.call(a,n)}catch(c){t=[6,c],r=0}finally{i=e=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}},Se=f&&f.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(_,"__esModule",{value:!0});_.getAuthorizationCodePayload=void 0;var C=ye(G),$=B,me=Se(V);function Oe(a){return we(this,void 0,void 0,function(){return ge(this,function(o){return[2,new Promise(function(n,i){var r=me.default(),e=a.subscribe(C.Action.RESPOND,function(u){switch(u?.status){case"needsExchange":n(u);break;default:i($.fromAction("Failed to retrieve an authorization code",$.Action.FAILED_AUTHENTICATION))}e()},r);a.dispatch(C.request(r))})]})})}_.getAuthorizationCodePayload=Oe;var m={},pe=f&&f.__awaiter||function(a,o,n,i){function r(e){return e instanceof n?e:new n(function(u){u(e)})}return new(n||(n=Promise))(function(e,u){function l(c){try{t(i.next(c))}catch(d){u(d)}}function s(c){try{t(i.throw(c))}catch(d){u(d)}}function t(c){c.done?e(c.value):r(c.value).then(l,s)}t((i=i.apply(a,o||[])).next())})},Me=f&&f.__generator||function(a,o){var n={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},i,r,e,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(t){return function(c){return s([t,c])}}function s(t){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,r&&(e=t[0]&2?r.return:t[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,t[1])).done)return e;switch(r=0,e&&(t=[t[0]&2,e.value]),t[0]){case 0:case 1:e=t;break;case 4:return n.label++,{value:t[1],done:!1};case 5:n.label++,r=t[1],t=[0];continue;case 7:t=n.ops.pop(),n.trys.pop();continue;default:if(e=n.trys,!(e=e.length>0&&e[e.length-1])&&(t[0]===6||t[0]===2)){n=0;continue}if(t[0]===3&&(!e||t[1]>e[0]&&t[1]<e[3])){n.label=t[1];break}if(t[0]===6&&n.label<e[1]){n.label=e[1],e=t;break}if(e&&n.label<e[2]){n.label=e[2],n.ops.push(t);break}e[2]&&n.ops.pop(),n.trys.pop();continue}t=o.call(a,n)}catch(c){t=[6,c],r=0}finally{i=e=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}};Object.defineProperty(m,"__esModule",{value:!0});m.userAuthorizedFetch=void 0;var Ae=_,je="auth/shopify/callback";function Pe(a){var o=a.headers.get("X-Shopify-API-Request-Failure-Unauthorized");return o?o.toLowerCase()==="true":!1}function Te(a){var o=this,n=a.app,i=a.callbackUri,r=i===void 0?je:i,e=a.isAuthorizationCodeRequired,u=e===void 0?Pe:e,l=a.fetchOperation;return function(s,t){return pe(o,void 0,void 0,function(){var c,d,p,M,A,j,P,T;return Me(this,function(y){switch(y.label){case 0:return[4,l(s,t)];case 1:return c=y.sent(),u(c)?[4,Ae.getAuthorizationCodePayload(n)]:[2,c];case 2:return d=y.sent(),p=d.code,M=d.hmac,A=d.shop,j=d.timestamp,P=encodeURI("https://"+window.location.hostname+"/"+r+"?code="+p+"&hmac="+M+"&shop="+A+"&timestamp="+j),[4,l(P,{})];case 3:if(T=y.sent(),!T.ok)throw new Error("Failed to authorize request.");return[2,l(s,t)]}})})}}m.userAuthorizedFetch=Te;(function(a){var o=f&&f.__createBinding||(Object.create?function(i,r,e,u){u===void 0&&(u=e),Object.defineProperty(i,u,{enumerable:!0,get:function(){return r[e]}})}:function(i,r,e,u){u===void 0&&(u=e),i[u]=r[e]}),n=f&&f.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&o(r,i,e)};Object.defineProperty(a,"__esModule",{value:!0}),n(_,a),n(m,a)})(H);(function(a){var o=f&&f.__createBinding||(Object.create?function(i,r,e,u){u===void 0&&(u=e),Object.defineProperty(i,u,{enumerable:!0,get:function(){return r[e]}})}:function(i,r,e,u){u===void 0&&(u=e),i[u]=r[e]}),n=f&&f.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&o(r,i,e)};Object.defineProperty(a,"__esModule",{value:!0}),n(v,a),n(h,a),n(R,a),n(H,a)})(F);(function(a){var o=f&&f.__createBinding||(Object.create?function(i,r,e,u){u===void 0&&(u=e),Object.defineProperty(i,u,{enumerable:!0,get:function(){return r[e]}})}:function(i,r,e,u){u===void 0&&(u=e),i[u]=r[e]}),n=f&&f.__exportStar||function(i,r){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&o(r,i,e)};Object.defineProperty(a,"__esModule",{value:!0}),n(F,a)})(W);export{W as a};
